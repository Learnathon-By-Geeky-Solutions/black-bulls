import{u as b,v as N,r as h,j as e,p as y}from"./index-BYmQdkFJ.js";import{s as a}from"./Auth.module-0E8Lv_Cg.js";const F=()=>{const{t:r}=b("auth"),v=N(),[s,g]=h.useState({name:"",phone:"",email:"",password:"",password_confirmation:"",role:"student",profile_picture:null}),[f,n]=h.useState(""),[x,j]=h.useState(!1),t=p=>{const{name:o,value:d,type:c,files:m}=p.target;g(c==="file"?{...s,[o]:m[0]}:{...s,[o]:d})},w=async p=>{var o,d,c,m;if(p.preventDefault(),n(""),s.password!==s.password_confirmation){n(r("register.passwordMismatch"));return}if(s.password.length<2){n(r("register.passwordLength"));return}j(!0);try{const l=new FormData;Object.keys(s).forEach(u=>{s[u]!==null&&l.append(u,s[u])});const i=await y.post("/register",l,{headers:{"Content-Type":"multipart/form-data"}});i.data.is_success?(localStorage.setItem("token",i.data.token.access_token),localStorage.setItem("user",JSON.stringify(i.data.user)),v("/profile")):n(i.data.message||r("register.failed"))}catch(l){const i=((d=(o=l.response)==null?void 0:o.data)==null?void 0:d.message)||((m=(c=l.response)==null?void 0:c.data)==null?void 0:m.errors)||r("register.failed");n(i)}finally{j(!1)}};return e.jsx("div",{className:a.authContainer,children:e.jsxs("div",{className:a.authCard,children:[e.jsx("h2",{children:r("register.title")}),e.jsx("p",{children:r("register.subtitle")}),f&&e.jsx("div",{className:a.error,children:f}),e.jsxs("form",{onSubmit:w,className:a.authForm,children:[e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"name",children:r("register.name")}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:t,required:!0})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"phone",children:r("register.phone")}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:t,required:!0,maxLength:"14"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"email",children:r("register.email")}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:t,required:!0})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"role",children:r("register.role")}),e.jsxs("select",{id:"role",name:"role",value:s.role,onChange:t,required:!0,children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"instructor",children:"Instructor"})]})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"profile_picture",children:r("register.profilePicture")}),e.jsx("input",{type:"file",id:"profile_picture",name:"profile_picture",onChange:t,accept:"image/jpeg,image/jpg,image/png"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"password",children:r("register.password")}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:t,required:!0,minLength:"2"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{htmlFor:"password_confirmation",children:r("register.confirmPassword")}),e.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:s.password_confirmation,onChange:t,required:!0})]}),e.jsx("button",{type:"submit",className:a.submitButton,disabled:x,children:r(x?"register.loading":"register.submit")})]}),e.jsx("div",{className:a.authLinks,children:e.jsxs("p",{children:[r("register.haveAccount")," ",e.jsx("a",{href:"/login",children:r("register.login")})]})})]})})};export{F as default};
