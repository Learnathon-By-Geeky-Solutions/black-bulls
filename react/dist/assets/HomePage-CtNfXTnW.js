import{r as g,p as A,u as C,j as e,L as p,P as t}from"./index-BYmQdkFJ.js";import{s as o,C as b}from"./CourseCard-C1WYNBG6.js";const x=(s,r)=>{const[i,a]=g.useState([]),[n,m]=g.useState(!0),[j,c]=g.useState(null);return g.useEffect(()=>{(async()=>{var d,y;try{m(!0);const u=await A.get(s);if(u.data.is_success){const f=u.data.data;a(s==="/home/free-courses"||Array.isArray(f)?f:[])}else a([]);c(null)}catch(u){console.error(`Error fetching ${s}:`,u),c(((y=(d=u.response)==null?void 0:d.data)==null?void 0:y.message)||r),a([])}finally{m(!1)}})()},[s,r]),{courses:i,loading:n,error:j}},h=({titleKey:s,subtitleKey:r,viewAllKey:i,viewAllLink:a,courses:n,loading:m,error:j,maxDisplay:c=4})=>{const{t:l}=C(["home","common"]);return m?e.jsx("div",{className:o.loading,children:l("common:loading")}):j?e.jsx("div",{className:o.error,children:l("common:error")}):e.jsxs("section",{className:o.section,children:[e.jsxs("div",{className:o.sectionHeader,children:[e.jsx("h2",{children:l(s)}),e.jsx("p",{children:l(r)})]}),e.jsx("div",{className:o.courseGrid,children:n==null?void 0:n.slice(0,c).map(d=>e.jsx(b,{course:d},d.id))}),(n==null?void 0:n.length)>c&&e.jsx("div",{className:o.viewAllContainer,children:e.jsx(p,{to:a,className:o.viewAllButton,children:l(i)})})]})};h.propTypes={titleKey:t.string.isRequired,subtitleKey:t.string.isRequired,viewAllKey:t.string.isRequired,viewAllLink:t.string.isRequired,courses:t.arrayOf(t.shape({id:t.oneOfType([t.string,t.number]).isRequired})),loading:t.bool,error:t.bool,maxDisplay:t.number};h.defaultProps={loading:!1,error:!1,maxDisplay:4,courses:[]};const w=()=>{const{courses:s,loading:r,error:i}=x("/home/free-courses","Failed to fetch free courses"),a=(s==null?void 0:s.data)||[];return e.jsx(h,{titleKey:"home:freeCourses.title",subtitleKey:"home:freeCourses.subtitle",viewAllKey:"home:freeCourses.viewAll",viewAllLink:"/home/free-courses",courses:a,loading:r,error:i,maxDisplay:4})},_=()=>{const{courses:s,loading:r,error:i}=x("/home/popular-courses","Failed to fetch popular courses");return e.jsx(h,{titleKey:"home:popularCourses.title",subtitleKey:"home:popularCourses.subtitle",viewAllKey:"home:popularCourses.viewAll",viewAllLink:"/home/popular-courses",courses:s,loading:r,error:i})},K=()=>{const{courses:s,loading:r,error:i}=x("/home/trending-courses","Failed to fetch trending courses");return e.jsx(h,{titleKey:"home:trendingCourses.title",subtitleKey:"home:trendingCourses.subtitle",viewAllKey:"home:trendingCourses.viewAll",viewAllLink:"/home/trending-courses",courses:s,loading:r,error:i})},N=({category:s})=>{var r;return e.jsxs(p,{to:`/categories/${s.id}`,className:o.categoryCard,children:[e.jsx("div",{className:o.categoryImage,children:e.jsx("img",{src:s.image,alt:s.name})}),e.jsxs("div",{className:o.categoryContent,children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{className:o.description,children:[(r=s.description)==null?void 0:r.substring(0,100),"..."]})]})]})};N.propTypes={category:t.shape({id:t.oneOfType([t.string,t.number]).isRequired,image:t.string.isRequired,name:t.string.isRequired,description:t.string}).isRequired};const R=()=>{const{t:s}=C(["home","common"]),{courses:r,loading:i,error:a}=x("/home/categories","Failed to fetch categories");return i?e.jsx("div",{className:o.loading,children:s("common:loading")}):a?e.jsx("div",{className:o.error,children:s("common:error")}):e.jsxs("section",{className:o.section,children:[e.jsxs("div",{className:o.sectionHeader,children:[e.jsx("h2",{children:s("home:categories.title")}),e.jsx("p",{children:s("home:categories.subtitle")})]}),e.jsx("div",{className:o.categoriesGrid,children:r==null?void 0:r.slice(0,8).map(n=>e.jsx(N,{category:n},n.id))}),(r==null?void 0:r.length)>8&&e.jsx("div",{className:o.viewAllContainer,children:e.jsx(p,{to:"/home/categories",className:o.viewAllButton,children:s("home:categories.viewAll")})})]})},S="_hero_hcp0z_1",q="_heroContent_hcp0z_13",P="_ctaButton_hcp0z_34",v={hero:S,heroContent:q,ctaButton:P},L=()=>{const{t:s}=C("home");return e.jsx("section",{className:v.hero,children:e.jsxs("div",{className:v.heroContent,children:[e.jsx("h1",{children:s("hero.title")}),e.jsx("p",{children:s("hero.subtitle")}),e.jsx(p,{to:"/courses",className:v.ctaButton,children:s("hero.getStarted")})]})})},T="_homePage_1lbgm_1",B={homePage:T},E=()=>e.jsxs("div",{className:B.homePage,children:[e.jsx(L,{}),e.jsx(_,{}),e.jsx(R,{}),e.jsx(w,{}),e.jsx(K,{})]});export{E as default};
